{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{medicalApi}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatInterface=()=>{const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(()=>{scrollToBottom();},[messages]);const handleSendMessage=async e=>{e.preventDefault();if(!inputMessage.trim()||isLoading)return;// Check if API key is set\nconst apiKey=localStorage.getItem('geminiApiKey');if(!apiKey){const errorMessage={id:Date.now(),role:'assistant',content:'Please set your Gemini API key in the settings first.',timestamp:new Date().toLocaleTimeString(),isError:true};setMessages(prev=>[...prev,errorMessage]);return;}const userMessage={id:Date.now(),role:'user',content:inputMessage,timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,userMessage]);setInputMessage('');setIsLoading(true);try{const response=await medicalApi.chat(inputMessage,messages.slice(-10));const aiMessage={id:Date.now()+1,role:'assistant',content:response.response,timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,aiMessage]);}catch(error){const errorMessage={id:Date.now()+1,role:'assistant',content:'Sorry, I encountered an error. Please try again.',timestamp:new Date().toLocaleTimeString(),isError:true};setMessages(prev=>[...prev,errorMessage]);}finally{setIsLoading(false);}};const suggestedQuestions=[\"What are the differences between MRI and CT scans?\",\"How do I interpret chest X-ray results?\",\"What imaging is best for brain tumors?\",\"Explain contrast agents in medical imaging\"];return/*#__PURE__*/_jsx(\"div\",{className:\"chat-interface\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-message\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDC4B Welcome to MedImaging AI Assistant\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ask me about medical imaging techniques, interpretations, or healthcare topics.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"suggested-questions\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Suggested Questions:\"}),suggestedQuestions.map((question,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"suggestion-btn\",onClick:()=>setInputMessage(question),children:question},index))]})]}):messages.map(message=>/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(message.role),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-role\",children:message.role==='user'?'üë§ You':'üè• MedAI'}),/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:message.timestamp})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content \".concat(message.isError?'error':''),children:message.content})]},message.id)),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"message assistant\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-header\",children:/*#__PURE__*/_jsx(\"span\",{className:\"message-role\",children:\"\\uD83C\\uDFE5 MedAI\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content loading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSendMessage,className:\"message-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:\"Ask about medical imaging, diagnostics, or healthcare...\",disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading||!inputMessage.trim(),children:isLoading?'‚è≥':'üì§'})]})})]})});};export default ChatInterface;","map":{"version":3,"names":["React","useState","useRef","useEffect","medicalApi","jsx","_jsx","jsxs","_jsxs","ChatInterface","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","e","preventDefault","trim","apiKey","localStorage","getItem","errorMessage","id","Date","now","role","content","timestamp","toLocaleTimeString","isError","prev","userMessage","response","chat","slice","aiMessage","error","suggestedQuestions","className","children","length","map","question","index","onClick","message","concat","ref","onSubmit","type","value","onChange","target","placeholder","disabled"],"sources":["C:/Users/91797/Desktop/medicalImaging/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { medicalApi } from '../utils/api';\r\n\r\nconst ChatInterface = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    // Check if API key is set\r\n    const apiKey = localStorage.getItem('geminiApiKey');\r\n    if (!apiKey) {\r\n      const errorMessage = {\r\n        id: Date.now(),\r\n        role: 'assistant',\r\n        content: 'Please set your Gemini API key in the settings first.',\r\n        timestamp: new Date().toLocaleTimeString(),\r\n        isError: true\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n      return;\r\n    }\r\n\r\n    const userMessage = {\r\n      id: Date.now(),\r\n      role: 'user',\r\n      content: inputMessage,\r\n      timestamp: new Date().toLocaleTimeString()\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputMessage('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await medicalApi.chat(inputMessage, messages.slice(-10));\r\n\r\n      const aiMessage = {\r\n        id: Date.now() + 1,\r\n        role: 'assistant',\r\n        content: response.response,\r\n        timestamp: new Date().toLocaleTimeString()\r\n      };\r\n\r\n      setMessages(prev => [...prev, aiMessage]);\r\n    } catch (error) {\r\n      const errorMessage = {\r\n        id: Date.now() + 1,\r\n        role: 'assistant',\r\n        content: 'Sorry, I encountered an error. Please try again.',\r\n        timestamp: new Date().toLocaleTimeString(),\r\n        isError: true\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const suggestedQuestions = [\r\n    \"What are the differences between MRI and CT scans?\",\r\n    \"How do I interpret chest X-ray results?\",\r\n    \"What imaging is best for brain tumors?\",\r\n    \"Explain contrast agents in medical imaging\"\r\n  ];\r\n\r\n  return (\r\n    <div className=\"chat-interface\">\r\n      <div className=\"chat-container\">\r\n        <div className=\"messages-container\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"welcome-message\">\r\n              <h3>üëã Welcome to MedImaging AI Assistant</h3>\r\n              <p>Ask me about medical imaging techniques, interpretations, or healthcare topics.</p>\r\n              \r\n              <div className=\"suggested-questions\">\r\n                <h4>Suggested Questions:</h4>\r\n                {suggestedQuestions.map((question, index) => (\r\n                  <button\r\n                    key={index}\r\n                    className=\"suggestion-btn\"\r\n                    onClick={() => setInputMessage(question)}\r\n                  >\r\n                    {question}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            messages.map(message => (\r\n              <div key={message.id} className={`message ${message.role}`}>\r\n                <div className=\"message-header\">\r\n                  <span className=\"message-role\">\r\n                    {message.role === 'user' ? 'üë§ You' : 'üè• MedAI'}\r\n                  </span>\r\n                  <span className=\"message-time\">{message.timestamp}</span>\r\n                </div>\r\n                <div className={`message-content ${message.isError ? 'error' : ''}`}>\r\n                  {message.content}\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n          {isLoading && (\r\n            <div className=\"message assistant\">\r\n              <div className=\"message-header\">\r\n                <span className=\"message-role\">üè• MedAI</span>\r\n              </div>\r\n              <div className=\"message-content loading\">\r\n                <div className=\"typing-indicator\">\r\n                  <span></span>\r\n                  <span></span>\r\n                  <span></span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <form onSubmit={handleSendMessage} className=\"message-form\">\r\n          <div className=\"input-container\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              placeholder=\"Ask about medical imaging, diagnostics, or healthcare...\"\r\n              disabled={isLoading}\r\n            />\r\n            <button type=\"submit\" disabled={isLoading || !inputMessage.trim()}>\r\n              {isLoading ? '‚è≥' : 'üì§'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}